[gd_scene load_steps=44 format=3 uid="uid://b75hun8hw8sj0"]

[ext_resource type="Script" path="res://player/player.gd" id="1_0if4t"]
[ext_resource type="Texture2D" uid="uid://bxturgjbo7ee2" path="res://temp/adventurer/adventurer-crouch-00.png" id="2_jb7dh"]
[ext_resource type="Texture2D" uid="uid://be4reg8w3lyro" path="res://temp/adventurer/adventurer-ladder-climb-00.png" id="2_p0kxa"]
[ext_resource type="Texture2D" uid="uid://b47aj4nufrmuu" path="res://temp/adventurer/adventurer-crouch-01.png" id="3_18ewb"]
[ext_resource type="Texture2D" uid="uid://5xrevgkb7wg4" path="res://temp/adventurer/adventurer-ladder-climb-01.png" id="3_ld6xd"]
[ext_resource type="Texture2D" uid="uid://bsq04av12w0tw" path="res://temp/adventurer/adventurer-crouch-02.png" id="4_8ful6"]
[ext_resource type="Texture2D" uid="uid://71r4r0yl4a8x" path="res://temp/adventurer/adventurer-ladder-climb-02.png" id="4_gflk0"]
[ext_resource type="Texture2D" uid="uid://daoohjmoioc5d" path="res://temp/adventurer/adventurer-crouch-03.png" id="5_u0j8i"]
[ext_resource type="Texture2D" uid="uid://d8oo8rnf5iw6" path="res://temp/adventurer/adventurer-ladder-climb-03.png" id="5_wt3hf"]
[ext_resource type="Texture2D" uid="uid://cuewoa1mdhmde" path="res://temp/adventurer/adventurer-air-attack1-00.png" id="6_jyr4j"]
[ext_resource type="Texture2D" uid="uid://bj045m6wrw6b4" path="res://temp/adventurer/adventurer-air-attack1-01.png" id="7_h3rj6"]
[ext_resource type="Texture2D" uid="uid://7lro8yqo6cvr" path="res://temp/adventurer/adventurer-air-attack1-02.png" id="8_ta86v"]
[ext_resource type="Texture2D" uid="uid://xqbodxrgkuwq" path="res://temp/adventurer/adventurer-air-attack1-03.png" id="9_sfh7k"]
[ext_resource type="Texture2D" uid="uid://cr3k75yor4ylk" path="res://temp/adventurer/adventurer-fall-00.png" id="10_6yypp"]
[ext_resource type="Texture2D" uid="uid://cnd7ekuqd46tr" path="res://temp/adventurer/adventurer-fall-01.png" id="11_kisms"]
[ext_resource type="Texture2D" uid="uid://d3hxvwhgjurv3" path="res://temp/adventurer/adventurer-idle-00.png" id="12_8yebu"]
[ext_resource type="Texture2D" uid="uid://cguc3lg250vc5" path="res://temp/adventurer/adventurer-idle-01.png" id="13_8vfrw"]
[ext_resource type="Texture2D" uid="uid://dydy0rxi5hud" path="res://temp/adventurer/adventurer-idle-02.png" id="14_p8q0y"]
[ext_resource type="Texture2D" uid="uid://cbt242n5gkxx1" path="res://temp/adventurer/adventurer-jump-02.png" id="17_2v83y"]
[ext_resource type="Texture2D" uid="uid://d26hkxldq7anf" path="res://temp/adventurer/adventurer-jump-03.png" id="18_3lmmi"]
[ext_resource type="Texture2D" uid="uid://fqtym10beun8" path="res://temp/adventurer/adventurer-run-00.png" id="19_7yssc"]
[ext_resource type="Texture2D" uid="uid://1ox4q6lrattk" path="res://temp/adventurer/adventurer-run-01.png" id="20_bcx44"]
[ext_resource type="Texture2D" uid="uid://c1y5ocnam48xr" path="res://temp/adventurer/adventurer-run-02.png" id="21_6pkww"]
[ext_resource type="Texture2D" uid="uid://cpemlrdbj8yh5" path="res://temp/adventurer/adventurer-run-03.png" id="22_1m1r5"]
[ext_resource type="Texture2D" uid="uid://dc5qnc52qx3rk" path="res://temp/adventurer/adventurer-run-04.png" id="23_xsf45"]
[ext_resource type="Texture2D" uid="uid://b02g1kidcva52" path="res://temp/adventurer/adventurer-run-05.png" id="24_nnj1m"]
[ext_resource type="Texture2D" uid="uid://dya4kkmq4ot8e" path="res://temp/adventurer/adventurer-slide-00.png" id="25_vl8ll"]
[ext_resource type="Texture2D" uid="uid://b8gv083akxoe3" path="res://temp/adventurer/adventurer-slide-01.png" id="26_xy8kw"]
[ext_resource type="Texture2D" uid="uid://d1pibuwgsa7ta" path="res://temp/adventurer/adventurer-wall-slide-00.png" id="27_3dhm5"]
[ext_resource type="Texture2D" uid="uid://cjayn8eck7ua6" path="res://temp/adventurer/adventurer-wall-slide-01.png" id="28_2yuen"]
[ext_resource type="AudioStream" uid="uid://c3cry3vws4b6j" path="res://temp/jump.ogg" id="29_hpjs7"]
[ext_resource type="Texture2D" uid="uid://dnm7ya8rtxqy1" path="res://temp/double_jump.png" id="30_cadxq"]

[sub_resource type="SpriteFrames" id="SpriteFrames_13nta"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_p0kxa")
}, {
"duration": 1.0,
"texture": ExtResource("3_ld6xd")
}, {
"duration": 1.0,
"texture": ExtResource("4_gflk0")
}, {
"duration": 1.0,
"texture": ExtResource("5_wt3hf")
}],
"loop": true,
"name": &"climbing",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_ld6xd")
}],
"loop": true,
"name": &"climbing_idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_jb7dh")
}, {
"duration": 1.0,
"texture": ExtResource("3_18ewb")
}, {
"duration": 1.0,
"texture": ExtResource("4_8ful6")
}, {
"duration": 1.0,
"texture": ExtResource("5_u0j8i")
}],
"loop": true,
"name": &"crouching",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_jyr4j")
}, {
"duration": 1.0,
"texture": ExtResource("7_h3rj6")
}, {
"duration": 1.0,
"texture": ExtResource("8_ta86v")
}, {
"duration": 2.0,
"texture": ExtResource("9_sfh7k")
}],
"loop": true,
"name": &"dashing",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("10_6yypp")
}, {
"duration": 1.0,
"texture": ExtResource("11_kisms")
}],
"loop": true,
"name": &"falling",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("12_8yebu")
}, {
"duration": 1.0,
"texture": ExtResource("13_8vfrw")
}, {
"duration": 1.0,
"texture": ExtResource("14_p8q0y")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("17_2v83y")
}, {
"duration": 1.0,
"texture": ExtResource("18_3lmmi")
}],
"loop": true,
"name": &"jumping",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("19_7yssc")
}, {
"duration": 1.0,
"texture": ExtResource("20_bcx44")
}, {
"duration": 1.0,
"texture": ExtResource("21_6pkww")
}, {
"duration": 1.0,
"texture": ExtResource("22_1m1r5")
}, {
"duration": 1.0,
"texture": ExtResource("23_xsf45")
}, {
"duration": 1.0,
"texture": ExtResource("24_nnj1m")
}],
"loop": true,
"name": &"running",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("25_vl8ll")
}, {
"duration": 1.0,
"texture": ExtResource("26_xy8kw")
}],
"loop": true,
"name": &"sliding",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("27_3dhm5")
}, {
"duration": 1.0,
"texture": ExtResource("28_2yuen")
}],
"loop": true,
"name": &"wall",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0rk70"]
size = Vector2(32, 22)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kjvja"]
size = Vector2(28, 50)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0u0hd"]
size = Vector2(14, 2)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3xclq"]
size = Vector2(14, 2)

[sub_resource type="AtlasTexture" id="AtlasTexture_txqwi"]
atlas = ExtResource("30_cadxq")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_nsbdq"]
atlas = ExtResource("30_cadxq")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_7ipp6"]
atlas = ExtResource("30_cadxq")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1n71a"]
atlas = ExtResource("30_cadxq")
region = Rect2(96, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_u3158"]
atlas = ExtResource("30_cadxq")
region = Rect2(128, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_1xcut"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": null
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_txqwi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nsbdq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7ipp6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1n71a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u3158")
}, {
"duration": 1.0,
"texture": null
}],
"loop": false,
"name": &"double_jump",
"speed": 20.0
}]

[node name="Player" type="CharacterBody2D" groups=["players"]]
collision_mask = 255
safe_margin = 0.1
script = ExtResource("1_0if4t")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
scale = Vector2(1.5, 1.5)
sprite_frames = SubResource("SpriteFrames_13nta")
animation = &"jumping"
autoplay = "idle"
frame_progress = 0.290991
offset = Vector2(0, -1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 14)
shape = SubResource("RectangleShape2D_0rk70")

[node name="Camera2D" type="Camera2D" parent="."]
limit_left = -16
limit_top = -16
limit_right = 656
limit_bottom = 376
limit_smoothed = true
position_smoothing_enabled = true

[node name="Timers" type="Node" parent="."]

[node name="DashTimer" type="Timer" parent="Timers"]
wait_time = 0.15
one_shot = true

[node name="SlideTimer" type="Timer" parent="Timers"]
wait_time = 0.3
one_shot = true

[node name="SlideCooldown" type="Timer" parent="Timers"]
wait_time = 0.1
one_shot = true

[node name="JumpBuffer" type="Timer" parent="Timers"]
wait_time = 0.2
one_shot = true

[node name="CoyoteTimer" type="Timer" parent="Timers"]
wait_time = 0.1
one_shot = true

[node name="WallHangTimer" type="Timer" parent="Timers"]
wait_time = 0.25
one_shot = true

[node name="LongPress" type="Timer" parent="Timers"]
wait_time = 0.5
one_shot = true

[node name="DoubleTap" type="Timer" parent="Timers"]
wait_time = 0.3
one_shot = true

[node name="Invulnerability" type="Timer" parent="Timers"]
one_shot = true

[node name="Detectors" type="Node2D" parent="."]

[node name="DropCheck" type="RayCast2D" parent="Detectors"]
target_position = Vector2(0, 100)
collision_mask = 8

[node name="InteractCheck" type="RayCast2D" parent="Detectors"]
target_position = Vector2(64, 0)
collision_mask = 32
hit_from_inside = true
collide_with_areas = true

[node name="WallHangLeft" type="Area2D" parent="Detectors"]
visible = false
collision_mask = 128

[node name="CollisionShape2D" type="CollisionShape2D" parent="Detectors/WallHangLeft"]
position = Vector2(-14, 5)
scale = Vector2(0.4, 0.6)
shape = SubResource("RectangleShape2D_kjvja")

[node name="WallHangRight" type="Area2D" parent="Detectors"]
visible = false
collision_mask = 128

[node name="CollisionShape2D" type="CollisionShape2D" parent="Detectors/WallHangRight"]
position = Vector2(14, 5)
scale = Vector2(0.4, 0.6)
shape = SubResource("RectangleShape2D_kjvja")

[node name="GapCheck" type="Area2D" parent="Detectors"]
visible = false
collision_layer = 0
collision_mask = 140

[node name="CollisionShape2D" type="CollisionShape2D" parent="Detectors/GapCheck"]
shape = SubResource("RectangleShape2D_0rk70")

[node name="NudgeCheck" type="Area2D" parent="Detectors"]
visible = false
collision_layer = 0
collision_mask = 140

[node name="CollisionShape2D" type="CollisionShape2D" parent="Detectors/NudgeCheck"]
shape = SubResource("RectangleShape2D_0rk70")

[node name="ClimbingTop" type="Area2D" parent="Detectors"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Detectors/ClimbingTop"]
position = Vector2(0, -5)
shape = SubResource("RectangleShape2D_0u0hd")

[node name="ClimbingBottom" type="Area2D" parent="Detectors"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Detectors/ClimbingBottom"]
position = Vector2(0, 5)
shape = SubResource("RectangleShape2D_3xclq")

[node name="JumpSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("29_hpjs7")
volume_db = -20.0

[node name="Effects" type="AnimatedSprite2D" parent="."]
z_index = -1
position = Vector2(0, 24)
scale = Vector2(1, 0.4375)
sprite_frames = SubResource("SpriteFrames_1xcut")
animation = &"double_jump"

[connection signal="timeout" from="Timers/DashTimer" to="." method="_on_dash_finished"]
[connection signal="timeout" from="Timers/SlideTimer" to="." method="_on_slide_finished"]
[connection signal="timeout" from="Timers/Invulnerability" to="." method="_on_invulnerability_timeout"]
[connection signal="body_entered" from="Detectors/WallHangLeft" to="." method="_on_left_wall_touched"]
[connection signal="body_exited" from="Detectors/WallHangLeft" to="." method="_on_wall_exited"]
[connection signal="body_entered" from="Detectors/WallHangRight" to="." method="_on_right_wall_touched"]
[connection signal="body_exited" from="Detectors/WallHangRight" to="." method="_on_wall_exited"]
[connection signal="body_entered" from="Detectors/NudgeCheck" to="." method="_on_nudge_check"]
[connection signal="area_entered" from="Detectors/ClimbingTop" to="." method="_on_climbing_top_entered"]
[connection signal="area_exited" from="Detectors/ClimbingTop" to="." method="_on_climbing_top_exited"]
[connection signal="area_entered" from="Detectors/ClimbingBottom" to="." method="_on_climbing_bottom_entered"]
[connection signal="area_exited" from="Detectors/ClimbingBottom" to="." method="_on_climbing_bottom_exited"]
