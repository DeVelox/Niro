[gd_scene load_steps=3 format=3 uid="uid://00ick1v8q3om"]

[ext_resource type="PackedScene" uid="uid://bb44qdp7l5m62" path="res://prefabs/level design/tilemap.tscn" id="1_jy5be"]

[sub_resource type="GDScript" id="GDScript_iepkl"]
script/source = "extends Level
@onready var tilemap: TileMap = $Tilemap


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	_set_spawn()
	_set_checkpoint()
	_check_vision()
	_initialise()

	Scene.pause_animation(tilemap, Scene.Source.FADEIN)
	Scene.pause_animation(tilemap, Scene.Source.FADEOUT)

	# Slowmo
	Engine.time_scale = 0.1

	# Manual calls of the fade functions (doesn't really work / works weird)
	#await Scene.fade_out(tilemap)
	#await Scene.fade_in(tilemap)

	# Manual call of the animation function (works correctly both ways, but starts on a random frame)
	Scene.toggle_layers(tilemap, false)
	for i in tilemap.get_used_cells(1):
		Scene.fade_animation(
			tilemap,
			1,
			tilemap.map_to_local(i),
			Scene.Source.FADEOUT,
			Scene._add_temp_layer(tilemap)
		)

	await get_tree().create_timer(0.1).timeout
	Scene.resume_animation(tilemap, Scene.Source.FADEIN)
	Scene.resume_animation(tilemap, Scene.Source.FADEOUT)
"

[node name="Test" type="Node2D"]
script = SubResource("GDScript_iepkl")

[node name="Ground" parent="." instance=ExtResource("1_jy5be")]
layer_0/tile_data = PackedInt32Array(-131072, 1245191, 5, -65536, 1245191, 6, -131071, 1310727, 5, -65535, 1310727, 6, -131070, 1376263, 5, -65534, 1376263, 6, -131069, 1441799, 5, -65533, 1441799, 6, -131068, 1507335, 5, -65532, 1507335, 6, -131067, 1245191, 5, -65531, 1245191, 6, -131066, 1310727, 5, -65530, 1310727, 6, -131065, 1376263, 5, -65529, 1376263, 6, -131064, 1441799, 5, -65528, 1441799, 6, -131063, 1507335, 5, -65527, 1507335, 6, -131062, 1245191, 5, -65526, 1245191, 6, -131061, 1310727, 5, -65525, 1310727, 6, -131060, 1376263, 5, -65524, 1376263, 6, -131059, 1441799, 5, -65523, 1441799, 6, -131058, 1507335, 5, -65522, 1507335, 6, -131057, 1245191, 5, -65521, 1245191, 6, -131056, 1310727, 5, -65520, 1310727, 6, -131055, 1376263, 5, -65519, 1376263, 6, -131054, 1441799, 5, -65518, 1441799, 6, -131053, 1507335, 5, -65517, 1507335, 6, -131052, 1245191, 5, -65516, 1245191, 6, -131051, 1310727, 5, -65515, 1310727, 6, -131050, 1376263, 5, -65514, 1376263, 6, -131049, 1441799, 5, -65513, 1441799, 6, -131048, 1507335, 5, -65512, 1507335, 6, -131047, 1245191, 5, -65511, 1245191, 6, -131046, 1310727, 5, -65510, 1310727, 6, -131045, 1376263, 5, -65509, 1376263, 6, -131044, 1441799, 5, -65508, 1441799, 6, -131043, 1507335, 5, -65507, 1507335, 6, -131042, 1245191, 5, -65506, 1245191, 6, -131041, 1310727, 5, -65505, 1310727, 6, -131040, 1376263, 5, -65504, 1376263, 6, -131039, 1441799, 5, -65503, 1441799, 6, -131038, 1507335, 5, -65502, 1507335, 6, -131037, 1245191, 5, -65501, 1245191, 6, -131036, 1310727, 5, -65500, 1310727, 6, -131035, 1376263, 5, -65499, 1376263, 6, -131034, 1441799, 5, -65498, 1441799, 6, -131033, 1507335, 5, -65497, 1507335, 6)

[node name="Tilemap" parent="." instance=ExtResource("1_jy5be")]
layer_1/tile_data = PackedInt32Array(-851951, 1245191, 6, -786415, 1245191, 7, -720879, 1245191, 8, -655343, 1245191, 9, -589807, 1245191, 10, -851950, 1310727, 6, -786414, 1310727, 7, -655342, 1310727, 9, -589806, 1310727, 10, -851949, 1376263, 6, -786413, 1376263, 7, -655341, 1376263, 9, -589805, 1376263, 10, -851948, 1441799, 6, -786412, 1441799, 7, -655340, 1441799, 9, -589804, 1441799, 10, -851947, 1507335, 6, -786411, 1507335, 7, -720875, 1507335, 8, -655339, 1507335, 9, -589803, 1507335, 10)
layer_4/tile_data = PackedInt32Array(-851950, 1, 131072, -851951, 1, 131072, -786415, 1, 131072, -720879, 1, 131072, -655343, 1, 131072, -589807, 1, 131072, -589806, 1, 131072, -851949, 1, 327680)
layer_5/tile_data = PackedInt32Array(-589805, 1, 327680, -589804, 1, 196608, -589803, 1, 196608, -655339, 1, 196608, -720875, 1, 196608, -786411, 1, 196608, -851947, 1, 196608, -851948, 1, 196608)

[node name="Spawn" type="Marker2D" parent="."]
position = Vector2(52, 280)
